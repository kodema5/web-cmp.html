var b=Object.defineProperty;var y=(n,t,e)=>t in n?b(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var m=(n,t,e)=>(y(n,typeof t!="symbol"?t+"":t,e),e);var f=class{constructor(t,e){this.strings=t,this.keys=e,this.templateId="web-cmp-"+ ++f.templateId,this.template=null,this.dom=null,this.fnId=0,this.functions={}}get content(){return(this.template??this.build()).content}build(){let t=this,e=t.strings.map((s,l)=>{let o=t.keys[l];if(!o)return s;if(typeof o!="function")return[s,o];let c=this.getFnId();this.functions[c]=o;let i=o.call(t.context,t.context),h=i instanceof f?i.innerHTML:i;return[s,"<!--",c,"-->",h,"<!--\\",c,"-->"]}).flat().filter(Boolean).join(""),r=f.create(e);return this.template=r,r}getFnId(){return this.templateId+"-"+ ++this.fnId}get innerHTML(){let t=document.createElement("div");return t.appendChild(this.content.cloneNode(!0)),t.innerHTML}refresh(t=null,e){e=e??this.dom;let r=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT);for(var s;s=r.nextNode();){let o=r.currentNode.textContent;if(!o)continue;let c=this.functions[o];if(!c)continue;let i=c.call(t,t),h=i instanceof f?i.content:i instanceof HTMLElement?i:f.create(i).content;if(!h)continue;let a="\\"+o;for(var l;(l=s.nextSibling)&&!(l.nodeType===8&&l.textContent===a);)l.remove();!s||s.parentNode.insertBefore(h,s.nextSibling)}}},u=f;m(u,"templateId",0),m(u,"create",t=>{let e=document.createElement("template");return e.innerHTML=t,e});var C=(n,...t)=>new u(n,t);var O=(n,{formAssociated:t=!0,elements:e={},connectedCallback:r=()=>{},attributes:s={},attributeChangedCallback:l=()=>{},properties:o={},...c}={})=>{let i=class extends HTMLElement{static formAssociated=t;constructor(){super(),this.template=n,this.internals=this.attachInternals();let a=this.attachShadow({mode:"open"});a.appendChild(n.content.cloneNode(!0)),T(this,a,e)}static get observedAttributes(){return Object.keys(s)}attributeChangedCallback(a,d,g){let p=s[a];p&&typeof p=="function"&&p.call(this,g,d),l.call(this,a,d,g)}refresh(){this.template.refresh(this,this.shadowRoot)}connectedCallback(){setTimeout(()=>{this.refresh(),r.call(this)})}},h=i.prototype;return x(h,o),x(h,c),i},T=(n,t,e)=>{Object.keys(e).forEach(r=>{let s=r==="."||r==="this"?[t]:t.querySelectorAll(r);!s.length!==0&&s.forEach(l=>{let o=e[r],c=typeof o=="function"?o.call(n,l):{...o},i=c.id||l.id;if(delete c.id,i&&l!==t){if(n[i])return;n[i]=l}Object.entries(c).forEach(([h,a])=>{let d=typeof a=="function";if(h[0]=="$"&&d){l.addEventListener(h.slice(1),a.bind(n));return}l[h]=d?a.bind(n):a})})})},x=(n,t)=>{Object.getOwnPropertyNames(t).forEach(e=>{let r=Object.getOwnPropertyDescriptor(t,e);r.hasOwnProperty("value")?n[e]=r.value:("get"in r||"set"in r)&&Object.defineProperty(n,e,{get:r.get,set:r.set})})};var w=n=>{let{cssRules:t}=Array.from(document.styleSheets).filter(e=>e.href?.indexOf(n)>=0)[0]||{};return t?Object.values(t).map(e=>e.cssText).join(`
`):""};export{u as Template,w as getCssText,C as template,O as webCmp};
//# sourceMappingURL=web-cmp.js.map
