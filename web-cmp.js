var x=Object.defineProperty;var y=(i,e,t)=>e in i?x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>(y(i,typeof e!="symbol"?e+"":e,t),t);var u=class{constructor(e,t){this.strings=e,this.keys=t,this.templateId="web-cmp-"+ ++u.templateId,this.template=null,this.dom=null,this.fnId=0,this.functions={}}get content(){return(this.template??this.build()).content}build(){let e=this,t=e.strings.map((r,c)=>{let s=e.keys[c];if(!s)return r;if(typeof s!="function")return[r,s];let l=this.getFnId();this.functions[l]=s;let o=s.call(e.context,e.context),a=o instanceof u?o.innerHTML:o;return[r,"<!--",l,"-->",a,"<!--\\",l,"-->"]}).flat().filter(Boolean).join(""),n=u.create(t);return this.template=n,n}getFnId(){return this.templateId+"-"+ ++this.fnId}get innerHTML(){let e=document.createElement("div");return e.appendChild(this.content.cloneNode(!0)),e.innerHTML}refresh(e=null,t){t=t??this.dom;let n=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT);for(var r;r=n.nextNode();){let s=n.currentNode.textContent;if(!s)continue;let l=this.functions[s];if(!l)continue;let o=l.call(e,e),a=o instanceof u?o.content:o instanceof HTMLElement?o:u.create(o).content;if(!a)continue;let h="\\"+s;for(var c;(c=r.nextSibling)&&!(c.nodeType===8&&c.textContent===h);)c.remove();!r||r.parentNode.insertBefore(a,r.nextSibling)}}},d=u;p(d,"templateId",0),p(d,"create",e=>{let t=document.createElement("template");return t.innerHTML=e,t});var O=(i,...e)=>new d(i,e);var C=(i,{formAssociated:e=!0,elements:t={},connectedCallback:n=()=>{},attributes:r={},attributeChangedCallback:c=()=>{},properties:s={},...l}={})=>{let o=class extends HTMLElement{static formAssociated=e;constructor(){super(),this.template=i,this.internals=this.attachInternals();let h=this.attachShadow({mode:"open"});h.appendChild(i.content.cloneNode(!0)),w(this,h,t)}static get observedAttributes(){return Object.keys(r)}attributeChangedCallback(h,m,b){let f=r[h];f&&typeof f=="function"&&f.call(this,b,m),c.call(this,h,m,b)}refresh(){this.template.refresh(this,this.shadowRoot)}connectedCallback(){setTimeout(()=>{this.refresh(),n.call(this)})}},a=o.prototype;return g(a,s),g(a,l),o},w=(i,e,t)=>{Object.entries(t).reduce((n,[r,c])=>{let s=r==="."||r==="this"?[e]:e.querySelectorAll(r);return!s.length===0||s.forEach(l=>{let o=typeof c=="function"?c.call(i,l):{...c};n.set(l,Object.assign(n.get(l)||{},o))}),n},new Map).forEach((n,r)=>{let c=n.id||r.id;if(delete n.id,c&&r!==e){if(i[c])return;i[c]=r}Object.entries(n).forEach(([s,l])=>{let o=typeof l=="function";if(s[0]=="$"&&o){r.addEventListener(s.slice(1),l.bind(i));return}r[s]=o?l.bind(i):l})})},g=(i,e)=>{Object.getOwnPropertyNames(e).forEach(t=>{let n=Object.getOwnPropertyDescriptor(e,t);n.hasOwnProperty("value")?i[t]=n.value:("get"in n||"set"in n)&&Object.defineProperty(i,t,{get:n.get,set:n.set})})};var T=i=>{let{cssRules:e}=Array.from(document.styleSheets).filter(t=>t.href?.indexOf(i)>=0)[0]||{};return e?Object.values(e).map(t=>t.cssText).join(`
`):""};export{d as Template,T as getCssText,O as template,C as webCmp};
//# sourceMappingURL=web-cmp.js.map
