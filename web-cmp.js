var x=Object.defineProperty;var b=(n,e,t)=>e in n?x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var p=(n,e,t)=>(b(n,typeof e!="symbol"?e+"":e,t),t);var f=class{constructor(e,t){this.strings=e,this.keys=t,this.templateId="web-cmp-"+ ++f.templateId,this.template=null,this.dom=null,this.fnId=0,this.functions={}}get content(){return(this.template??this.build()).content}build(){let e=this,t=e.strings.map((l,c)=>{let s=e.keys[c];if(!s)return l;if(typeof s!="function")return[l,s];let o=this.getFnId();this.functions[o]=s;let i=s.call(e.context,e.context),a=i instanceof f?i.innerHTML:i;return[l,"<!--",o,"-->",a,"<!--\\",o,"-->"]}).flat().filter(Boolean).join(""),r=f.create(t);return this.template=r,r}getFnId(){return this.templateId+"-"+ ++this.fnId}get innerHTML(){let e=document.createElement("div");return e.appendChild(this.content.cloneNode(!0)),e.innerHTML}refresh(e=null,t){t=t??this.dom;let r=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT);for(var l;l=r.nextNode();){let s=r.currentNode.textContent;if(!s)continue;let o=this.functions[s];if(!o)continue;let i=o.call(e,e),a=i instanceof f?i.content:i instanceof HTMLElement?i:f.create(i).content;if(!a)continue;let u="\\"+s;for(var c;(c=l.nextSibling)&&!(c.nodeType===8&&c.textContent===u);)c.remove();!l||l.parentNode.insertBefore(a,l.nextSibling)}}},h=f;p(h,"templateId",0),p(h,"create",e=>{let t=document.createElement("template");return t.innerHTML=e,t});var g=(n,...e)=>new h(n,e);var y=(n,{formAssociated:e=!0,elements:t={},attributes:r={},properties:l={},...c}={})=>{let s=class extends HTMLElement{static formAssociated=e;constructor(){super(),this.template=n,this.internals=this.attachInternals();let i=this.attachShadow({mode:"open"});i.appendChild(n.content.cloneNode(!0)),C(this,i,t)}static get observedAttributes(){return Object.keys(r)}attributeChangedCallback(i,a,u){let d=r[i];!d||typeof d!="function"||d.call(this,u,a)}refresh(){this.template.refresh(this,this.shadowRoot)}connectedCallback(){setTimeout(()=>this.refresh())}},o=s.prototype;return m(o,l),m(o,c),s},C=(n,e,t)=>{Object.keys(t).forEach(r=>{let l=r==="."||r==="this"?e:e.querySelector(r);if(!l)return;let c={...t[r]},s=c.id||l.id;if(delete c.id,s&&l!==e){if(n[s])return;n[s]=l}Object.entries(c).forEach(([o,i])=>{let a=typeof i=="function";if(o[0]=="$"){if(!a)return;l.addEventListener(o.slice(1),i.bind(n))}l[o]=a?i.bind(n):i})})},m=(n,e)=>{Object.getOwnPropertyNames(e).forEach(t=>{let r=Object.getOwnPropertyDescriptor(e,t);r.hasOwnProperty("value")?n[t]=r.value:("get"in r||"set"in r)&&Object.defineProperty(n,t,{get:r.get,set:r.set})})};var O=n=>{let{cssRules:e}=Array.from(document.styleSheets).filter(t=>t.href.indexOf(n)>=0)[0]||{};return e?Object.values(e).map(t=>t.cssText).join(`
`):""};export{h as Template,O as getCssText,g as template,y as webCmp};
//# sourceMappingURL=web-cmp.js.map
